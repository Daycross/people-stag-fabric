
:root {
  --bg: #0f0f10;
  --card: #1a1b1e;
  --text: #f7f7f7;
  --muted: #bcbec4;
  --accent: #d22b84;
  --ok: #34d399;
}
* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body { margin: 0; background: var(--bg); color: var(--text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif; }

.container { max-width: 480px; margin: 0 auto; padding: env(safe-area-inset-top) 16px 24px; }

header { position: sticky; top: 0;  padding: 8px 0 8px; z-index: 10; backdrop-filter: blur(8px); }
.title { font-size: 1.25rem; font-weight: 700; letter-spacing: 0.5px; display: flex; align-items: center; gap: 10px; }
.title .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--accent); }

.map-card { background: var(--card); border-radius: 18px; padding: 18px 14px; box-shadow: 0 10px 30px rgba(0,0,0,0.25); margin: 8px 0 18px; position: relative; overflow: hidden; }
.checkpoint-row { display: flex; align-items: center; justify-content: space-between; position: relative; padding: 12px 6px; }
.checkpoint { width: 44px; height: 44px; border-radius: 50%; display: grid; place-items: center; font-weight: 800; border: 2px dashed rgba(255,255,255,0.25); color: var(--muted); background: #111215; }
.checkpoint.active { border-style: solid; border-color: var(--accent); color: #fff; }
.checkpoint.done { border-style: solid; border-color: var(--ok); color: #fff; background: rgba(52, 211, 153, 0.1); }
.checkpoint-row .checkpoint { position: relative; z-index: 1; }
.checkpoint-row .checkpoint.clickable { cursor: pointer; }
.checkpoint-row .checkpoint.disabled { opacity: 0.7; cursor: not-allowed; }
.btn.black { background-color: #000 !important;}

.card { background: var(--card); border-radius: 18px; padding: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.25); }
.card h2 { margin: 0 0 8px; font-size: 1.1rem; }
.muted { color: var(--muted); font-size: 0.9rem; }
.btn { border: 0; border-radius: 14px; padding: 12px 16px; font-weight: 700; background: var(--accent); color: white; }
.btn:disabled { opacity: 0.5; }
.btn.secondary { background: #2a2b31; color: #fff; }
.btn.ghost { background: transparent; border: 1px solid #2a2b31; }
.row { display: flex; gap: 10px; align-items: center; }

.modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.6); display: grid; place-items: center; z-index: 50; }
.modal { width: 92vw; max-width: 480px; background: var(--card); border-radius: 16px; padding: 16px; }
.modal header { display: flex; justify-content: space-between; align-items: center; }
.modal body { margin-top: 12px; }
.preview { width: 100%; aspect-ratio: 1 / 1; border-radius: 12px; background: #0d0e11; display: grid; place-items: center; overflow: hidden; }
.preview img { width: 100%; height: 100%; object-fit: cover; }

.match-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 10px; }
.avatar-card { background: #121317; border: 1px solid #2a2b31; border-radius: 14px; padding: 10px; }
.avatar { width: 100%; aspect-ratio: 1/1; border-radius: 12px; background: #0d0e11 center/cover no-repeat; margin-bottom: 8px; }
.slot { background: #0d0e11; border: 1px dashed #2a2b31; border-radius: 10px; padding: 8px; min-height: 38px; display: grid; place-items: center; color: var(--muted); }
.names { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
.chip { border: 1px solid #2a2b31; padding: 10px 12px; border-radius: 999px; background: #14151a; color: #fff; font-weight: 600; }
.chip.selected { outline: 2px solid var(--accent); }

.puzzle { width: 100%; aspect-ratio: 1/1; margin-top: 10px; display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(4, 1fr); gap: 4px; background: #0d0e11; border: 1px solid #2a2b31; border-radius: 12px; padding: 4px; touch-action: none; }
.tile { position: relative; border-radius: 6px; overflow: hidden; background-size: 400% 400%; background-position: center; background-repeat: no-repeat; cursor: grab; }
.tile:after { content: ""; position: absolute; inset: 0; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06); border-radius: 6px; }
.tile.dragging { outline: 2px dashed var(--accent); opacity: 0.95; }
.tile.selected { outline: 2px solid var(--accent); }

.success { margin-top: 14px; background: rgba(52, 211, 153, 0.12); color: #d1fae5; border: 1px solid rgba(52, 211, 153, 0.35); padding: 12px 14px; border-radius: 12px; font-weight: 700; text-align: center; }

.map-svg { position: absolute; inset: 0; width: 100%; height: 100%; z-index: 0; opacity: 0.9; filter: drop-shadow(0 2px 6px rgba(0,0,0,0.35)); }
.map-path { fill: none; stroke: #d8b46a; stroke-width: 3.5; stroke-linecap: round; stroke-linejoin: round; stroke-dasharray: 10 7 4 7; animation: dash-march 14s linear infinite; }
@keyframes dash-march { 0% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: -56; } }
.map-x line { stroke: #c70c32; stroke-width: 3.5; stroke-linecap: round; }

/* Golden Ticket Overlay */
.overlay-backdrop { position: fixed; inset: 0; z-index: 60; background: radial-gradient(120% 120% at 50% 50%, rgba(0,0,0,0.75), rgba(0,0,0,0.85) 60%, rgba(0,0,0,0.95)); display: grid; place-items: center; padding: 18px; }
.ticket { width: min(720px, 94vw); border-radius: 18px; background: linear-gradient(135deg, #f6e27a, #e3c55a 20%, #d4af37 45%, #b58c28 70%, #f1d97c); position: relative; color: #452100; box-shadow: 0 20px 60px rgba(0,0,0,0.45); padding: 18px; --hole: 18px;
  -webkit-mask:
    radial-gradient(circle var(--hole) at 0% 50%, transparent 98%, #000 100%) left center / calc(var(--hole)*2) 100% no-repeat,
    radial-gradient(circle var(--hole) at 100% 50%, transparent 98%, #000 100%) right center / calc(var(--hole)*2) 100% no-repeat,
    linear-gradient(#000 0 0);
          mask:
    radial-gradient(circle var(--hole) at 0% 50%, transparent 98%, #000 100%) left center / calc(var(--hole)*2) 100% no-repeat,
    radial-gradient(circle var(--hole) at 100% 50%, transparent 98%, #000 100%) right center / calc(var(--hole)*2) 100% no-repeat,
    linear-gradient(#000 0 0);
    position: absolute;
}
.ticket:after { content: ""; position: absolute; inset: 12px; border: 2px dashed rgba(69,33,0,0.35); border-radius: 12px; pointer-events: none; }
.ticket-inner { text-align: center; padding: 18px 14px; }
.ticket-title { margin: 8px 0 10px; font-size: clamp(1.35rem, 4.3vw, 2rem); font-weight: 900; letter-spacing: .4px; text-shadow: 0 1px 0 rgba(255,255,255,0.4); }
.ticket-desc { margin: 6px auto 16px; line-height: 1.55; max-width: 60ch; font-size: 1rem; }
.ticket-actions { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }

/* grid sempre fluido no mobile */
.match-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr)); /* evita overflow */
  gap: 12px;
}

/* deixa os cards encolherem sem estourar a largura */
.avatar-card { min-width: 0; }

/* imagem como background, 100% do card, centralizada */
.avatar {
  width: 100%;
  aspect-ratio: 1 / 1;
  border-radius: 12px;
  background: #0d0e11 center/cover no-repeat; /* cover + center */
}

/* telas muito estreitas: 1 coluna */
@media (max-width: 360px) {
  .match-grid { grid-template-columns: 1fr; }
}

/* === Surprise FX (pop-in + confetti) === */
.ticket.pop-in {
  transform-origin: center;
  animation: pop-in 540ms cubic-bezier(.2,1.4,.3,1) both;
}
@keyframes pop-in {
  0% { transform: scale(.6) rotate(-2deg); opacity: 0; filter: blur(2px); }
  60% { transform: scale(1.04) rotate(.6deg); opacity: 1; filter: blur(0); }
  100% { transform: scale(1) rotate(0); }
}

.confetti-burst {
  position: absolute; inset: 0;
  pointer-events: none; /* não bloqueia clique no CTA */
  overflow: visible;
}
.confetti-piece {
  position: absolute; left: 50%; top: 50%;
  transform: translate(-50%,-50%);
  border-radius: 2px;
  will-change: transform, opacity;
  animation: confetti-burst var(--dur) cubic-bezier(.12,.72,.06,1) var(--delay) both;
}
@keyframes confetti-burst {
  0% { transform: translate(-50%,-50%) translate(0,0) rotate(0deg); opacity: 0; }
  10% { opacity: 1; }
  100% {
    transform: translate(-50%,-50%) translate(var(--dx), var(--dy)) rotate(var(--rot));
    opacity: 0;
  }
}

/* Acessibilidade: usuários com reduzida animação */
@media (prefers-reduced-motion: reduce) {
  .ticket.pop-in { animation: none; }
  .confetti-piece { animation: none; opacity: 1; }
}
